#include "tempdir.bash"

cat >test.in <<EOF
reset = rst/1
test::r.0 = reg/32 1 test::r__update.0
test::r.1 = reg/32 1 test::r__update.1
test::r.2 = reg/32 1 test::r__update.2
test::r.3 = reg/32 1 test::r__update.3
test::r.4 = reg/32 1 test::r__update.4
test::r.5 = reg/32 1 test::r__update.5
test::r.6 = reg/32 1 test::r__update.6
test::r.7 = reg/26 1 test::r__update.7
test::r.c0 = mov/32 test::r__update.0
test::r.c1 = catd test::r__update.1 test::r.c0
test::r.c2 = catd test::r__update.2 test::r.c1
test::r.c3 = catd test::r__update.3 test::r.c2
test::r.c4 = catd test::r__update.4 test::r.c3
test::r.c5 = catd test::r__update.5 test::r.c4
test::r.c6 = catd test::r__update.6 test::r.c5
test::r = catd test::r__update.7 test::r.c6
T0.0 = not/32 test::r.0
T0.1 = not/32 test::r.1
T0.2 = not/32 test::r.2
T0.3 = not/32 test::r.3
T0.4 = not/32 test::r.4
T0.5 = not/32 test::r.5
T0.6 = not/32 test::r.6
T0.7 = not/26 test::r.7
T0.c0 = mov/32 T0.0
T0.c1 = catd T0.1 T0.c0
T0.c2 = catd T0.2 T0.c1
T0.c3 = catd T0.3 T0.c2
T0.c4 = catd T0.4 T0.c3
T0.c5 = catd T0.5 T0.c4
T0.c6 = catd T0.6 T0.c5
T0 = catd T0.7 T0.c6
test::io_o.0 = out/32 test::r.0
test::io_o.1 = out/32 test::r.1
test::io_o.2 = out/32 test::r.2
test::io_o.3 = out/32 test::r.3
test::io_o.4 = out/32 test::r.4
test::io_o.5 = out/32 test::r.5
test::io_o.6 = out/32 test::r.6
test::io_o.7 = out/26 test::r.7
test::io_o.c0 = mov/32 test::io_o.0
test::io_o.c1 = catd test::io_o.1 test::io_o.c0
test::io_o.c2 = catd test::io_o.2 test::io_o.c1
test::io_o.c3 = catd test::io_o.3 test::io_o.c2
test::io_o.c4 = catd test::io_o.4 test::io_o.c3
test::io_o.c5 = catd test::io_o.5 test::io_o.c4
test::io_o.c6 = catd test::io_o.6 test::io_o.c5
test::io_o = catd test::io_o.7 test::io_o.c6
test::r__update.0 = mux/32 reset 0 T0.0
test::r__update.1 = mux/32 reset 0 T0.1
test::r__update.2 = mux/32 reset 0 T0.2
test::r__update.3 = mux/32 reset 0 T0.3
test::r__update.4 = mux/32 reset 0 T0.4
test::r__update.5 = mux/32 reset 0 T0.5
test::r__update.6 = mux/32 reset 0 T0.6
test::r__update.7 = mux/26 reset 0 T0.7
test::r__update.c0 = mov/32 test::r__update.0
test::r__update.c1 = catd test::r__update.1 test::r__update.c0
test::r__update.c2 = catd test::r__update.2 test::r__update.c1
test::r__update.c3 = catd test::r__update.3 test::r__update.c2
test::r__update.c4 = catd test::r__update.4 test::r__update.c3
test::r__update.c5 = catd test::r__update.5 test::r__update.c4
test::r__update.c6 = catd test::r__update.6 test::r__update.c5
test::r__update = catd test::r__update.7 test::r__update.c6
EOF

cat >test.gold <<EOF
reset = rst'1
test::r.0 = reg'32 1'1 test::r__update.0
test::r.1 = reg'32 1'1 test::r__update.1
test::r.2 = reg'32 1'1 test::r__update.2
test::r.3 = reg'32 1'1 test::r__update.3
test::r.4 = reg'32 1'1 test::r__update.4
test::r.5 = reg'32 1'1 test::r__update.5
test::r.6 = reg'32 1'1 test::r__update.6
test::r.7 = reg'26 1'1 test::r__update.7
test::r.c0 = mov'32 test::r__update.0
test::r.c1 = catd'32 test::r__update.1 test::r.c0
test::r.c2 = catd'64 test::r__update.2 test::r.c1
test::r.c3 = catd'96 test::r__update.3 test::r.c2
test::r.c4 = catd'128 test::r__update.4 test::r.c3
test::r.c5 = catd'160 test::r__update.5 test::r.c4
test::r.c6 = catd'192 test::r__update.6 test::r.c5
test::r = catd'224 test::r__update.7 test::r.c6
T0.0 = not'32 test::r.0
T0.1 = not'32 test::r.1
T0.2 = not'32 test::r.2
T0.3 = not'32 test::r.3
T0.4 = not'32 test::r.4
T0.5 = not'32 test::r.5
T0.6 = not'32 test::r.6
T0.7 = not'26 test::r.7
T0.c0 = mov'32 T0.0
T0.c1 = catd'32 T0.1 T0.c0
T0.c2 = catd'64 T0.2 T0.c1
T0.c3 = catd'96 T0.3 T0.c2
T0.c4 = catd'128 T0.4 T0.c3
T0.c5 = catd'160 T0.5 T0.c4
T0.c6 = catd'192 T0.6 T0.c5
T0 = catd'224 T0.7 T0.c6
test::io_o.0 = out'32 test::r.0
test::io_o.1 = out'32 test::r.1
test::io_o.2 = out'32 test::r.2
test::io_o.3 = out'32 test::r.3
test::io_o.4 = out'32 test::r.4
test::io_o.5 = out'32 test::r.5
test::io_o.6 = out'32 test::r.6
test::io_o.7 = out'26 test::r.7
test::io_o.c0 = mov'32 test::io_o.0
test::io_o.c1 = catd'32 test::io_o.1 test::io_o.c0
test::io_o.c2 = catd'64 test::io_o.2 test::io_o.c1
test::io_o.c3 = catd'96 test::io_o.3 test::io_o.c2
test::io_o.c4 = catd'128 test::io_o.4 test::io_o.c3
test::io_o.c5 = catd'160 test::io_o.5 test::io_o.c4
test::io_o.c6 = catd'192 test::io_o.6 test::io_o.c5
test::io_o = catd'224 test::io_o.7 test::io_o.c6
test::r__update.0 = mux'32 reset 0'32 T0.0
test::r__update.1 = mux'32 reset 0'32 T0.1
test::r__update.2 = mux'32 reset 0'32 T0.2
test::r__update.3 = mux'32 reset 0'32 T0.3
test::r__update.4 = mux'32 reset 0'32 T0.4
test::r__update.5 = mux'32 reset 0'32 T0.5
test::r__update.6 = mux'32 reset 0'32 T0.6
test::r__update.7 = mux'26 reset 0'26 T0.7
test::r__update.c0 = mov'32 test::r__update.0
test::r__update.c1 = catd'32 test::r__update.1 test::r__update.c0
test::r__update.c2 = catd'64 test::r__update.2 test::r__update.c1
test::r__update.c3 = catd'96 test::r__update.3 test::r__update.c2
test::r__update.c4 = catd'128 test::r__update.4 test::r__update.c3
test::r__update.c5 = catd'160 test::r__update.5 test::r__update.c4
test::r__update.c6 = catd'192 test::r__update.6 test::r__update.c5
test::r__update = catd'224 test::r__update.7 test::r__update.c6
EOF

#include "harness.bash"
